@model ProLeague.Application.ViewModels.News.CreateNewsViewModel

@{
    ViewData["Title"] = "ایجاد خبر جدید";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h1 class="h3 mb-3">@ViewData["Title"]</h1>

<form asp-action="Create" enctype="multipart/form-data">
    <div asp-validation-summary="All" class="text-danger mb-3"></div>
    <div class="row">
        <div class="col-lg-8">
            <div class="card shadow-sm mb-3">
                <div class="card-header"><h5 class="mb-0">محتوای خبر</h5></div>
                <div class="card-body">
                    <div class="mb-3">
                        <label asp-for="Title" class="form-label"></label>
                        <input asp-for="Title" class="form-control" />
                    </div>
                    <div class="mb-3">
                        <label asp-for="Content" class="form-label"></label>
                        <textarea asp-for="Content" class="form-control" id="contentEditor"></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="card shadow-sm mb-3">
                <div class="card-header"><h5 class="mb-0">تنظیمات و تصاویر</h5></div>
                <div class="card-body">
                    <div class="form-check form-switch mb-3">
                        <input asp-for="IsFeatured" class="form-check-input" />
                        <label asp-for="IsFeatured" class="form-check-label"></label>
                    </div>
                    <div class="mb-3">
                        <label asp-for="MainImageFile" class="form-label"></label>
                        <input asp-for="MainImageFile" type="file" class="form-control" accept="image/*" />
                    </div>
                    <div class="mb-3">
                        <label asp-for="GalleryFiles" class="form-label"></label>
                        <input asp-for="GalleryFiles" type="file" class="form-control" multiple accept="image/*" />
                    </div>
                </div>
            </div>
            <div class="card shadow-sm mb-3">
                <div class="card-header"><h5 class="mb-0">موجودیت‌های مرتبط</h5></div>
                <div class="card-body">
                    <div class="mb-3"><label asp-for="RelatedLeagueIds" class="form-label"></label><select asp-for="RelatedLeagueIds" class="form-select select2" asp-items="ViewBag.Leagues" multiple></select></div>
                    <div class="mb-3"><label asp-for="RelatedTeamIds" class="form-label"></label><select asp-for="RelatedTeamIds" class="form-select select2" asp-items="ViewBag.Teams" multiple></select></div>
                    <div class="mb-3"><label asp-for="RelatedPlayerIds" class="form-label"></label><select asp-for="RelatedPlayerIds" class="form-select select2" asp-items="ViewBag.Players" multiple></select></div>
                </div>
            </div>
        </div>
    </div>
    <div class="form-group mt-3">
        <button type="submit" class="btn btn-success"><i class="fas fa-save me-2"></i> ایجاد خبر</button>
        <a asp-action="Index" class="btn btn-secondary"><i class="fas fa-times me-2"></i> انصراف</a>
    </div>
</form>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs5.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs5.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script>
        $(document).ready(function() {
            // راه‌اندازی Select2
            $('.select2').select2({
                 placeholder: "یک یا چند مورد را انتخاب کنید",
                 dir: "rtl"
            });

            // راه‌اندازی Summernote
            $('#contentEditor').summernote({
                placeholder: 'محتوای خبر را اینجا وارد کنید...',
                tabsize: 2,
                height: 300,
                toolbar: [
                    ['style', ['style']],
                    ['font', ['bold', 'italic', 'underline', 'clear']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['table', ['table']],
                    ['insert', ['link']],
                    ['view', ['fullscreen', 'codeview']]
                ]
            });
        });
    </script>
}