@model IEnumerable<ProLeague.Domain.Entities.Team>

@{
    // مرتب‌سازی تیم‌ها بر اساس قوانین فوتبال
    var sortedTeams = Model
        .OrderByDescending(t => t.Points)
        .ThenByDescending(t => t.GoalDifference)
        .ThenByDescending(t => t.GoalsFor)
        .ToList();
}

<div class="table-responsive">
    <table class="table table-hover align-middle">
        <thead class="table-light text-center">
            <tr>
                <th scope="col" style="width: 5%;">#</th>
                <th scope="col" class="text-start" style="width: 40%;">تیم</th>
                <th scope="col" title="تعداد بازی">G</th>
                <th scope="col" title="برد">W</th>
                <th scope="col" title="مساوی">D</th>
                <th scope="col" title="باخت">L</th>
                <th scope="col" title="تفاضل گل">GD</th>
                <th scope="col" title="امتیاز">Pts</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < sortedTeams.Count; i++)
            {
                var team = sortedTeams[i];
                var rank = i + 1;

                // هایلایت کردن رتبه‌های برتر (مثال: ۴ تیم اول)
                string rowClass = rank <= 4 ? "table-success" : "";

                <tr class="@rowClass">
                    <th scope="row" class="text-center">@rank</th>
                    <td class="text-start">
                        <a asp-controller="Team" asp-action="Details" asp-route-id="@team.Id" class="text-decoration-none text-dark fw-bold">
                            <img src="@(team.ImagePath ?? "/images/default-logo.png")" class="league-table-logo me-2" alt="@team.Name" height="50px" />
                            @team.Name
                        </a>
                    </td>
                    <td class="text-center">@team.Played</td>
                    <td class="text-center">@team.Wins</td>
                    <td class="text-center">@team.Draws</td>
                    <td class="text-center">@team.Losses</td>
                    <td class="text-center">@team.GoalDifference</td>
                    <td class="text-center fw-bold">@team.Points</td>
                </tr>
            }
        </tbody>
    </table>
</div>