@model ProLeague.Application.ViewModels.User.ManageUserRolesViewModel

@{
    ViewData["Title"] = "مدیریت نقش‌ها";
}

<h1 class="h3 mb-3">@ViewData["Title"]</h1>

<div class="card shadow-sm">
    <div class="card-header">
        <h5 class="mb-0">تغییر نقش برای کاربر: <span class="text-primary">@Model.UserName</span></h5>
    </div>
    <div class="card-body">
        <form asp-action="ManageRoles" method="post">
            @* استفاده از asp-for برای فیلد مخفی خواناتر است *@
            <input type="hidden" asp-for="UserId" />

            <div class="list-group">
                @foreach (var role in Model.AllRoles)
                {
                    <label class="list-group-item d-flex justify-content-between align-items-center">
                        @role
                        <div class="form-check form-switch">
                            <input type="checkbox"
                                   name="SelectedRoles"
                                   value="@role"
                                   class="form-check-input"
                                   @(Model.UserRoles.Contains(role) ? "checked" : "")
                                   role="switch">
                        </div>
                    </label>
                }
            </div>

            <div class="mt-4">
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save me-2"></i> ذخیره تغییرات
                </button>
                <a asp-action="Index" class="btn btn-secondary">بازگشت به لیست</a>
            </div>
        </form>
    </div>
</div>